{"version":3,"file":"dropdown-mobile.js","sources":["dropdown-mobile.js"],"sourcesContent":["/**\n * Baoba - Dropdown Mobile (Produção)\n * Otimizado para performance e estabilidade\n */\n\n(function() {\n  'use strict';\n  \n  const DEV = window.location.hostname === 'localhost' || window.location.search.includes('debug');\n  const MOBILE_BREAKPOINT = 1024;\n  \n  let resizeTimeout;\n  let headerObserver = null;\n  let mobileInstance = null;\n  \n  const config = {\n    triggerClass: '.btn-dropdown',\n    submenuId: 'mega-menu',\n    headerSelector: '.header-main',\n    menuToggleSelector: '.menu-hamburger',\n    activeClass: 'w--open',\n    headerActiveClass: 'mobile-menu-active'\n  };\n  \n  function log(message) {\n    if (DEV) console.log('Baoba Mobile:', message);\n  }\n  \n  function isMobile() {\n    return window.innerWidth <= MOBILE_BREAKPOINT;\n  }\n  \n  function cleanupMobileInstance() {\n    if (mobileInstance) {\n      mobileInstance.cleanup();\n      mobileInstance = null;\n    }\n  }\n  \n  function createMobileInstance() {\n    const triggerLi = document.querySelector(`li:has(${config.triggerClass})`);\n    const submenu = document.querySelector(`#${config.submenuId} .dropdown-menu-list`);\n    \n    if (!triggerLi || !submenu) {\n      log('Elementos do dropdown mobile não encontrados');\n      return null;\n    }\n    \n    return {\n      triggerLi: triggerLi,\n      submenu: submenu,\n      \n      open: function() {\n        this.submenu.style.cssText = '';\n        this.submenu.setAttribute('aria-hidden', 'false');\n        this.submenu.classList.add('active');\n        this.triggerLi.classList.add('active');\n      },\n      \n      close: function() {\n        this.submenu.style.cssText = `\n          display: none !important;\n          visibility: hidden !important;\n          opacity: 0 !important;\n          pointer-events: none !important;\n        `;\n        this.submenu.classList.remove('active');\n        this.submenu.setAttribute('aria-hidden', 'true');\n        this.triggerLi.classList.remove('active');\n      },\n      \n      setup: function() {\n        const self = this;\n        \n        // Move submenu into LI\n        this.triggerLi.appendChild(this.submenu);\n        \n        // Prevent bubbling on links\n        const submenuLinks = this.submenu.querySelectorAll('a');\n        submenuLinks.forEach(link => {\n          link.addEventListener('click', (e) => e.stopPropagation());\n        });\n        \n        // Click handler\n        function handleClick(e) {\n          if (!e.target.closest('.dropdown-menu-list a')) {\n            e.preventDefault();\n            e.stopPropagation();\n            self.triggerLi.classList.contains('active') ? self.close() : self.open();\n          }\n        }\n        \n        // Remove existing listeners\n        this.triggerLi.removeEventListener('click', handleClick);\n        \n        // Add new listener\n        this.triggerLi.addEventListener('click', handleClick);\n      },\n      \n      cleanup: function() {\n        // Restore submenu to original position if needed\n        const originalContainer = document.querySelector(`#${config.submenuId}`);\n        if (originalContainer && this.submenu.parentNode === this.triggerLi) {\n          originalContainer.querySelector('.dropdown-menu-wrap').appendChild(this.submenu);\n        }\n      }\n    };\n  }\n  \n  function setupHeaderObserver() {\n    try {\n      if (!isMobile()) {\n        if (headerObserver) {\n          headerObserver.disconnect();\n          headerObserver = null;\n        }\n        return;\n      }\n      \n      const header = document.querySelector(config.headerSelector);\n      const menuToggle = document.querySelector(config.menuToggleSelector);\n      \n      if (!header || !menuToggle) {\n        log('Elementos do header mobile não encontrados');\n        return;\n      }\n      \n      if (headerObserver) {\n        headerObserver.disconnect();\n      }\n      \n      headerObserver = new MutationObserver((mutations) => {\n        mutations.forEach((mutation) => {\n          if (mutation.type === 'attributes' && mutation.attributeName === 'class') {\n            const isMenuOpen = menuToggle.classList.contains(config.activeClass);\n            header.classList.toggle(config.headerActiveClass, isMenuOpen);\n          }\n        });\n      });\n      \n      headerObserver.observe(menuToggle, {\n        attributes: true,\n        attributeFilter: ['class']\n      });\n      \n      // Check initial state\n      header.classList.toggle(config.headerActiveClass, menuToggle.classList.contains(config.activeClass));\n      \n      log('Header observer configurado');\n    } catch (error) {\n      if (DEV) console.error('Erro ao configurar header observer:', error);\n    }\n  }\n  \n  function setupMobileDropdown() {\n    try {\n      if (!isMobile()) {\n        cleanupMobileInstance();\n        return;\n\n\n      }\n      \n      cleanupMobileInstance();\n      mobileInstance = createMobileInstance();\n      \n      if (mobileInstance) {\n        mobileInstance.setup();\n        log('Dropdown mobile inicializado');\n      }\n    } catch (error) {\n      if (DEV) console.error('Erro ao inicializar dropdown mobile:', error);\n    }\n  }\n  \n  function handleOutsideClick(e) {\n    if (!isMobile() || !mobileInstance) return;\n    \n    if (!e.target.closest(`li:has(${config.triggerClass})`)) {\n      mobileInstance.close();\n    }\n  }\n  \n  function handleResize() {\n    clearTimeout(resizeTimeout);\n    resizeTimeout = setTimeout(() => {\n      cleanupMobileInstance();\n      setupHeaderObserver();\n      setupMobileDropdown();\n    }, 250);\n  }\n  \n  function init() {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () => {\n        setupHeaderObserver();\n        setupMobileDropdown();\n      });\n    } else {\n      setTimeout(() => {\n        setupHeaderObserver();\n        setupMobileDropdown();\n      }, 100);\n    }\n    \n    window.addEventListener('resize', handleResize);\n    document.addEventListener('click', handleOutsideClick);\n  }\n  \n  init();\n  \n})();"],"names":["DEV","window","location","hostname","search","includes","MOBILE_BREAKPOINT","resizeTimeout","headerObserver","mobileInstance","config","triggerClass","submenuId","headerSelector","menuToggleSelector","activeClass","headerActiveClass","log","message","console","isMobile","innerWidth","cleanupMobileInstance","cleanup","setupHeaderObserver","header","document","querySelector","menuToggle","disconnect","MutationObserver","mutations","forEach","mutation","type","attributeName","isMenuOpen","classList","contains","toggle","observe","attributes","attributeFilter","error","setupMobileDropdown","triggerLi","submenu","open","this","style","cssText","setAttribute","add","close","remove","setup","self","handleClick","e","target","closest","preventDefault","stopPropagation","appendChild","querySelectorAll","link","addEventListener","removeEventListener","originalContainer","parentNode","handleOutsideClick","handleResize","clearTimeout","setTimeout","readyState"],"mappings":"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"}